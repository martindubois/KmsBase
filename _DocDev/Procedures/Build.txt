
Author / Auteur		:	KMS -	Martin Dubois, ing.
Product / Produit	:	KmsBase
File / Fichier		:	_DocDev/Procedures/Build.txt

/English/

===== Internal Version ======================================================

[ ] Open a command windows
	- Navigate to the product folder;
	- Execute "RunDoxygen.cmd";
	- Verify that the script do not generate error message.
[ ]	Open the solution using "Visual Studio 2013"
	- Edit "Common/Version.h"
		- Increment the build number;
		- Verify the "VERSION_INTERNAL" is "true"
	- Edit "Script/Install.cmd" and change the version number if needed;
	- Edit "Templates/Driver_KMDF/Driver_KMDF.inf" and increment the build
	  number;
	- In the "BUILD" menu, select "Batch Build...";
	- In the "Batch Build" dialog, click "Rebuild";
	- In the "FILE" menu, select "Save All".
[ ]	In the command windows
	- Execute "Test.cmd";
	- Execute "Export.cmd Ma.Mi.Bu_Type" where
		Ma = Major version;
		Mi = Minor Version;
		Bu = Build number;
		Type = Internal | RC | Test
[ ]	Open "GIT GUI" on the product folder
	- Index modified file;
	- Commit indexed file using "Ma.Mi.Bu" as message;
[ ] Open "GIT BASH" in the product folder
	- Execute "git tag Ma.Mi.Bu".
[ ] Push the GIT repository on the server.

===== External Version ======================================================



/Francais/

===== Version Interne =======================================================

[ ] Ouvrir une fenetre de commande
	- Naviguer jusqu'au repertoire du produit;
	- Entrer la commande "RunDoxygen.cmd";
	- Verifier que le fichier de commande ne genere pas de message d'erreur.
[ ]	Ouvrir la solution en utilisant "Visual Studio 2013"
	- Modifier le fichier "Common/Version.h"
		- Incrementer le numero de compilation;
		- Verifier que "VERSION_INTERNAL" est a "true"
	- Modifier le fichier "Script/Install.cmd" pour incrementer le numero de
	  version si necessaire;
	- Modifier le fichier "Templates/Driver_KMDF/Driver_KMDF.inf" pour
	  incrementer le numero de version;
	- Dans le menu "BUILD", selectionner l'item "Batch Build...";
	- Dans le dialogue "Batch Build", cliquer "Rebuild";
	- Dans le menu "FILE", selectionner l'item "Save All".
[ ]	Dans la fenetre de commande
	- Entrer la commande "Test.cmd";
	- Entrer la commande "Export.cmd Ma.Mi.Bu_Type" ou
		Ma = Numero majeur de version;
		Mi = Numero mineur de version;
		Bu = Numero de comilation;
		Type = Internal | RC | Test
[ ]	Ouvrir un "GIT GUI" pour le	repertoire du produit
	- Indexer les fichier modifier lors de la compilation;
	- Effetuer un commit en utilisant "Ma.Mi.Bu" comme message;
[ ] Ouvrir un "GIT BASH" pour le repertoire du produit
	- Entrer la commande "git tag Ma.Mi.Bu".
[ ] Pousser le depot GIT sur le	serveur.

===== Version Externe =======================================================

[ ]	Ouvrir la solution en utilisant "Visual Studio 2013"
	- Modifier le fichier "Common/Version.h"
		- Incrementer le numero de compilation;
		- Verifier que "VERSION_INTERNAL" est a "false"
	- Modifier le fichier "Script/Install.cmd" pour incrementer le numero de
	  version si necessaire;
	- Modifier le fichier "Templates/Driver_KMDF/Driver_KMDF.inf" pour
	  incrementer le numero de version;
	- Dans le menu "BUILD", selectionner l'item "Batch Build...";
	- Dans le dialogue "Batch Build", cliquer "Rebuild";
	- Dans le menu "FILE", selectionner l'item "Save All".
[ ]	Onvrir une fenetre de commande
	- Naviguer jusqu'au repertoire du produit;
	- Entrer la commande "Test.cmd".
[ ] Connecter l'adaptateur RS232 à USB à un des ports USB de l'ordinateur;
[ ] Dans la fenetre de commande, entrer la commande "Test_SetupA.cmd"
[ ] Ouvrir une fenetre s'executant en tant qu'administrateur
	- Entrer la commande "Test_SetupB.cmd";
	- Entrer la commande "Test_SetupC.cmd";
	- Entrer la commande "exit", pour fermer la fenetre.
[ ] Deconnecter l'adaptateur RS232 à USB;
[ ] Dans la fenetre de commande
	- Entrer la commande "Export.cmd Ma.Mi.Bu_Type" ou
		Ma = Numero majeur de version;
		Mi = Numero mineur de version;
		Bu = Numero de comilation;
		Type =  | RC | Test
[ ]	Ouvrir un "GIT GUI" pour le	repertoire du produit
	- Indexer les fichier modifier lors de la compilation;
	- Effetuer un commit en utilisant "Ma.Mi.Bu" comme message;
[ ] Ouvrir un "GIT BASH" pour le repertoire du produit
	- Entrer la commande "git tag Ma.Mi.Bu".
	- Entrer la commande "./ExportSources.sh Ma.Mi.Bu_Type"
[ ] Pousser le depot GIT sur le	serveur.
